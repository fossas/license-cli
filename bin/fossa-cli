#!/usr/bin/env node

var program = require('commander')
var metadata = require('../package.json')
var cmd = require('../lib/cmd.js')

program
  .version(metadata.version)
  .option('-p, --project <id>', '(required) project id or locator to query')
  .option('-r, --revision [id]', '(optional) revision id to query; defaults to latest')
  .option('-b, --branch [branch]', '(optional) branch to default to if no revision is specified')
  .option('-t, --token [token]', '(optional) api token for accessing private projects')
  .option('-e, --endpoint [url]', '(optional) custom fossa instance url', 'https://app.fossa.io/')

program
  .command('issues')
  .description('output issue status for a given project or revision')
  .action(cmd.issues)

program
  .command('build')
  .description('queue a build for a given project')
  .action(cmd.build)

program
  .command('run', 'queue a fossa build/scan and output errors if issues are found')
  .action(cmd.run)

program.parse(process.argv)
